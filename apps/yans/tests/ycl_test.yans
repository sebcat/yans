#!/usr/bin/env lua
-- vim: shiftwidth=2 tabstop=2 expandtab

local m = yans.ycl.msgbuf()
assert(m:size() == 0)
assert(#m:data() == 0)

m:create_status_resp{okmsg = "foo bar"}
assert(m:size() > 0)
assert(#m:data() > 0)

local resp = m:parse_status_resp()
assert(resp.okmsg == "foo bar")
assert(resp.errmsg == nil)

m:create_status_resp{errmsg = "barbar"}
resp = m:parse_status_resp()
assert(resp.okmsg == nil)
assert(resp.errmsg == "barbar")
