local _M = {

}

function _M:new(o)
  assert(o.path, "missing path")
  local ycl = yans.ycl
  o.sock = ycl.connect(o.path)
  o.msgbuf = ycl.msg()
  self.__index = self
  setmetatable(o, self)
  return o
end

function _M:get_netconf()
  self.msgbuf:create_route_req{}
  self.sock:sendmsg(self.msgbuf)
  self.sock:recvmsg(self.msgbuf)
  local resp = self.msgbuf:parse_route_resp()
  return yans.ip.unmarshal_netconf(resp)
end

return _M
